(function(a){var p={};a.fn.minibox=function(l){var h;(h=a(this).attr("id"))||a.error("This plugin requires the container to have an id attribute");if(!p[h]){var i,t,j,k,u,v,m,c,q,w,b,r,s,g,n;t=function(a){a.preventDefault();g=a.target;k();i.show()};m=function(){0<c.autoPlay&&(n=setTimeout(m,1E3*c.autoPlay));a(g).attr("src")===a(w).attr("src")?(g=q,k()):j("right",!0)};j=function(f,e){var d;"right"===f?d="minibox-move-right":"left"===f?d=null:(f.stopPropagation(),f.preventDefault(),d=a(f.target).parent().attr("id"));
d="minibox-move-right"===d?a(g).next("img"):a(g).prev("img");0!==d.length&&(g=d,k(),e||(window.clearTimeout(n),!1===c.stopAutoPlayOnButton&&(n=setTimeout(m,1E3*c.autoPlay))))};k=function(){b.css({marginTop:a("body").scrollTop()});s.hide().attr("src",a(g).attr("src")).css("margin-top",Math.abs(a(g).attr("real-height")-u())/2).fadeIn("fast")};u=function(){var a=0;if("number"===typeof window.innerWidth)a=window.innerHeight;else if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight))a=
document.documentElement.clientHeight;else if(document.body&&(document.body.clientWidth||document.body.clientHeight))a=document.body.clientHeight;return a};v=function(a){var e=c.thumbails.width,d=c.thumbails.height;0===e&&0===d?a.attr("real-height",a.height()):(e?d=e*a.height()/a.width():e=d*a.width()/a.height(),a.attr("real-height",a.height()).css({width:e,height:d}))};i={init:function(f){var e;c=a.extend({showNavigation:!0,showCloseButton:!0,prevButton:"css/previous.png",nextButton:"css/next.png",
closeButton:"css/close.png",keyCodeRight:39,keyCodeLeft:37,keyCodeEscape:27,thumbails:{width:0,height:0},autoOpen:!1,autoPlay:0,stopAutoPlayOnButton:!1},f);b=a('<div id="minibox-bg"></div>');f=a('<a href="#" id="minibox-move-left"><img src="'+c.prevButton+'" alt="PREV" /></a>');e=a('<a href="#" id="minibox-move-right"><img src="'+c.nextButton+'" alt="PREV" /></a>');r=a('<div id="minibox-options"></div>');s=a('<img src="" />');r.append(f).append(e);b.append(s);c.showNavigation&&b.append(r);c.showCloseButton&&
b.append('<img id="minibox-close" src="'+c.closeButton+'" alt="X" />');a("body").append(b);f.bind("click.minibox",j);e.bind("click.minibox",j);b.bind("click.minibox",i.hide);a("body").bind("keyup.minibox",function(a){a.keyCode===c.keyCodeRight?j("right"):a.keyCode===c.keyCodeLeft?j("left"):a.keyCode===c.keyCodeEscape&&i.hide()});a(window).bind("scroll.minibox",i.reposition);a(window).bind("resize.minibox",i.reposition);this.each(function(){var d,e=a(this);a(this).find("img[rel=minibox]").each(function(e,
b){b=a(b);d=d||b;q=q||b;w=b;b.hide().one("load",function(){v(b);a(this).fadeIn("slow");c.autoOpen&&d===b&&(g=b,k(),i.show())}).each(function(){this.complete&&a(this).load()}).bind("click.minibox",t)});window.onload=function(){e.hide()}});return this},destroy:function(){b.remove()},reposition:function(){k()},show:function(){b.fadeIn("fast");0<c.autoPlay&&(n=setTimeout(m,1E3*c.autoPlay))},hide:function(){b.hide()}};p[h]=i}h=p[h];if("object"===typeof l||!l)return h.init.apply(this,arguments);if(h[l])return h[l].apply(this,
Array.prototype.slice.call(arguments,1));a.error("Method "+l+" does not exist on jQuery.minibox")}})(jQuery);