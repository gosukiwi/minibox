(function(b){var k={};b.fn.minibox=function(h){var d;(d=b(this).attr("id"))||b.error("This plugin requires the container to have an id attribute");if(!k[d]){var f,n,i,j,p,q,e,c,l,m,g;n=function(a){a.preventDefault();g=a.target;j();f.show()};i=function(a){"right"===a?a="minibox-move-right":"left"===a?a=null:(a.stopPropagation(),a.preventDefault(),a=b(a.target).parent().attr("id"));a="minibox-move-right"===a?b(g).next("img"):b(g).prev("img");0!==a.length&&(g=a,j())};j=function(){c.css({marginTop:b("body").scrollTop()});
m.hide().attr("src",b(g).attr("src")).css("margin-top",Math.abs(b(g).attr("real-height")-p())/2).fadeIn("fast")};p=function(){var a=0;if("number"===typeof window.innerWidth)a=window.innerHeight;else if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight))a=document.documentElement.clientHeight;else if(document.body&&(document.body.clientWidth||document.body.clientHeight))a=document.body.clientHeight;return a};q=function(a){var b=e.thumbails.width,
c=e.thumbails.height;0===b&&0===c||(b?c=b*a.height()/a.width():b=c*a.width()/a.height(),a.attr("real-height",a.height()).css({width:b,height:c}))};f={init:function(a){var d;e=b.extend({showNavigation:!0,showCloseButton:!0,prevButton:"css/previous.png",nextButton:"css/next.png",closeButton:"css/close.png",keyCodeRight:39,keyCodeLeft:37,keyCodeEscape:27,thumbails:{width:0,height:0}},a);c=b('<div id="minibox-bg"></div>');a=b('<a href="#" id="minibox-move-left"><img src="'+e.prevButton+'" alt="PREV" /></a>');
d=b('<a href="#" id="minibox-move-right"><img src="'+e.nextButton+'" alt="PREV" /></a>');l=b('<div id="minibox-options"></div>');m=b('<img src="" />');l.append(a).append(d);c.append(m);e.showNavigation&&c.append(l);e.showCloseButton&&c.append('<img id="minibox-close" src="'+e.closeButton+'" alt="X" />');b("body").append(c);a.bind("click.minibox",i);d.bind("click.minibox",i);c.bind("click.minibox",f.hide);b("body").bind("keyup.minibox",function(a){a.keyCode===e.keyCodeRight?i("right"):a.keyCode===
e.keyCodeLeft?i("left"):a.keyCode===e.keyCodeEscape&&f.hide()});b(window).bind("scroll.minibox",f.reposition);b(window).bind("resize.minibox",f.reposition);this.each(function(){b(this).find("img[rel=minibox]").each(function(a,c){c=b(c);c.hide().one("load",function(){q(c);b(this).fadeIn("slow")}).each(function(){this.complete&&b(this).load()}).bind("click.minibox",n)})});return this},destroy:function(){return this.each(function(){b(window).unbind(".minibox")})},reposition:function(){j()},show:function(){c.fadeIn("fast")},
hide:function(){c.hide()}};k[d]=f}d=k[d];if("object"===typeof h||!h)return d.init.apply(this,arguments);if(d[h])return d[h].apply(this,Array.prototype.slice.call(arguments,1));b.error("Method "+h+" does not exist on jQuery.minibox")}})(jQuery);