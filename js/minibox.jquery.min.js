(function(b){var l={};b.fn.minibox=function(j){var e;(e=b(this).attr("id"))||b.error("This plugin requires the container to have an id attribute");if(!l[e]){var g,q,h,i,r,s,t,d,m,u,c,n,p,f,v;q=function(a){a.preventDefault();f=a.target;i();g.show()};t=function(){b(f).attr("src")===b(u).attr("src")?(f=m,i()):h("right")};h=function(a){"right"===a?a="minibox-move-right":"left"===a?a=null:(a.stopPropagation(),a.preventDefault(),a=b(a.target).parent().attr("id"));a="minibox-move-right"===a?b(f).next("img"):
b(f).prev("img");0!==a.length&&(f=a,i())};i=function(){c.css({marginTop:b("body").scrollTop()});p.hide().attr("src",b(f).attr("src")).css("margin-top",Math.abs(b(f).attr("real-height")-r())/2).fadeIn("fast")};r=function(){var a=0;if("number"===typeof window.innerWidth)a=window.innerHeight;else if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight))a=document.documentElement.clientHeight;else if(document.body&&(document.body.clientWidth||document.body.clientHeight))a=
document.body.clientHeight;return a};s=function(a){var b=d.thumbails.width,k=d.thumbails.height;0===b&&0===k?a.attr("real-height",a.height()):(b?k=b*a.height()/a.width():b=k*a.width()/a.height(),a.attr("real-height",a.height()).css({width:b,height:k}))};g={init:function(a){var e;d=b.extend({showNavigation:!0,showCloseButton:!0,prevButton:"css/previous.png",nextButton:"css/next.png",closeButton:"css/close.png",keyCodeRight:39,keyCodeLeft:37,keyCodeEscape:27,thumbails:{width:0,height:0},autoOpen:!1,
autoPlay:0},a);c=b('<div id="minibox-bg"></div>');a=b('<a href="#" id="minibox-move-left"><img src="'+d.prevButton+'" alt="PREV" /></a>');e=b('<a href="#" id="minibox-move-right"><img src="'+d.nextButton+'" alt="PREV" /></a>');n=b('<div id="minibox-options"></div>');p=b('<img src="" />');n.append(a).append(e);c.append(p);d.showNavigation&&c.append(n);d.showCloseButton&&c.append('<img id="minibox-close" src="'+d.closeButton+'" alt="X" />');b("body").append(c);a.bind("click.minibox",h);e.bind("click.minibox",
h);c.bind("click.minibox",g.hide);b("body").bind("keyup.minibox",function(a){a.keyCode===d.keyCodeRight?h("right"):a.keyCode===d.keyCodeLeft?h("left"):a.keyCode===d.keyCodeEscape&&g.hide()});b(window).bind("scroll.minibox",g.reposition);b(window).bind("resize.minibox",g.reposition);this.each(function(){var a;b(this).find("img[rel=minibox]").each(function(e,c){c=b(c);a=a||c;m=m||c;u=c;c.hide().one("load",function(){s(c);b(this).fadeIn("slow");d.autoOpen&&a===c&&(f=c,i(),g.show())}).each(function(){this.complete&&
b(this).load()}).bind("click.minibox",q)})});return this},destroy:function(){c.remove()},reposition:function(){i()},show:function(){c.fadeIn("fast");0<d.autoPlay&&(v=setInterval(t,1E3*d.autoPlay))},hide:function(){c.hide();0<d.autoPlay&&window.clearInterval(v)}};l[e]=g}e=l[e];if("object"===typeof j||!j)return e.init.apply(this,arguments);if(e[j])return e[j].apply(this,Array.prototype.slice.call(arguments,1));b.error("Method "+j+" does not exist on jQuery.minibox")}})(jQuery);