(function(a){var p={};a.fn.minibox=function(l){var e;(e=a(this).attr("id"))||a.error("This plugin requires the container to have an id attribute");if(!p[e]){var j,t,g,k,u,v,m,c,q,w,d,r,s,h,n;t=function(b){b.preventDefault();h=b.target;k();j.show()};m=function(){0<c.autoPlay&&(n=setTimeout(m,1E3*c.autoPlay));a(h).attr("src")===a(w).attr("src")?(h=q,k()):g("right",!0)};g=function(b,x){var f;"right"===b?f="minibox-move-right":"left"===b?f=null:(b.stopPropagation(),b.preventDefault(),f=a(b.target).parent().attr("id"));
f="minibox-move-right"===f?a(h).next("img"):a(h).prev("img");0!==f.length&&(h=f,k(),x||(window.clearTimeout(n),!1===c.stopAutoPlayOnButton&&(n=setTimeout(m,1E3*c.autoPlay))))};k=function(){var b=a(h).attr("real-height");d.css({marginTop:a("body").scrollTop()});s.hide().attr({src:a(h).attr("src"),height:b}).css("margin-top",Math.abs(b-u())/2).fadeIn("fast")};u=function(){var b=0;if("number"===typeof window.innerWidth)b=window.innerHeight;else if(document.documentElement&&(document.documentElement.clientWidth||
document.documentElement.clientHeight))b=document.documentElement.clientHeight;else if(document.body&&(document.body.clientWidth||document.body.clientHeight))b=document.body.clientHeight;return b};v=function(b){var a=c.thumbails.width,f=c.thumbails.height,d=b.height();0===a&&0===f?(d>c.maxHeight&&(d=c.maxHeight),b.attr("real-height",d)):(a?f=a*b.height()/b.width():a=f*b.width()/b.height(),b.attr("real-height",b.height()).css({width:a,height:f}))};j={init:function(b){var e;c=a.extend({showNavigation:!0,
showCloseButton:!0,prevButton:"css/previous.png",nextButton:"css/next.png",closeButton:"css/close.png",keyCodeRight:39,keyCodeLeft:37,keyCodeEscape:27,thumbails:{width:0,height:0},autoOpen:!1,autoPlay:0,stopAutoPlayOnButton:!1,maxHeight:650,onImagesLoaded:function(){},onOpen:function(){},onBeforeClose:function(){}},b);d=a('<div id="minibox-bg"></div>');b=a('<a href="#" id="minibox-move-left"><img src="'+c.prevButton+'" alt="PREV" /></a>');e=a('<a href="#" id="minibox-move-right"><img src="'+c.nextButton+
'" alt="PREV" /></a>');r=a('<div id="minibox-options"></div>');s=a('<img src="" />');r.append(b).append(e);d.append(s);c.showNavigation&&d.append(r);c.showCloseButton&&d.append('<img id="minibox-close" src="'+c.closeButton+'" alt="X" />');a("body").append(d);b.bind("click.minibox",g);e.bind("click.minibox",g);d.bind("click.minibox",j.hide);a("body").bind("keyup.minibox",function(a){a.keyCode===c.keyCodeRight?g("right"):a.keyCode===c.keyCodeLeft?g("left"):a.keyCode===c.keyCodeEscape&&j.hide()});a(window).bind("scroll.minibox",
j.reposition);a(window).bind("resize.minibox",j.reposition);this.each(function(){var b,d=a(this).find("img[rel=minibox]"),e=d.length,g=0;d.each(function(d,i){i=a(i);b=b||i;q=q||i;w=i;i.hide().one("load",function(){g+=1;v(i);a(this).fadeIn("slow");c.autoOpen&&b===i&&(h=i,k(),j.show());if(g===e)c.onImagesLoaded()}).each(function(){this.complete&&a(this).load()}).bind("click.minibox",t)})});return this},destroy:function(){d.remove()},reposition:function(){k()},show:function(){d.fadeIn("fast");0<c.autoPlay&&
(n=setTimeout(m,1E3*c.autoPlay));c.onOpen()},hide:function(){c.onBeforeClose();d.hide()}};p[e]=j}e=p[e];if("object"===typeof l||!l)return e.init.apply(this,arguments);if(e[l])return e[l].apply(this,Array.prototype.slice.call(arguments,1));a.error("Method "+l+" does not exist on jQuery.minibox")}})(jQuery);